<!DOCTYPE html>
<html>
<head>
    <title>Users</title>
    <link rel="stylesheet" type="text/css" href="/style.css">
</head>
<body>
    <h1>All Users</h1>
    <ul id="user-list"></ul>
    <div id="create_new_user"><a href="/create" >Create New  User</a></div>
    <script>
        fetch('/api/users')
            .then(response => response.json())
            .then(users => {
                const userList = document.getElementById('user-list');
                users.forEach(user => {
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `
                        ${user.name} - ${user.nickname} - ${user.age} - ${user.bio}
                        <a href="/edit/${user.id}">Edit</a>
                        <a href="#" onclick="deleteUser(${user.id})">Delete</a>
                    `;
                    userList.appendChild(listItem);
                });
            });

        function deleteUser(id) {
            fetch(`/api/users/${id}`, { method: 'DELETE' })
                .then(() => {
                    window.location.reload();
                });
        }
    </script>
</body>
</html>
